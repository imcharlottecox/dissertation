import{c as b,q as H,j as d}from"./BReedbPm.js";function I(r){return r.x+r.vx}function J(r){return r.y+r.vy}function L(r){var o,s,m,l=1,j=1;typeof r!="function"&&(r=b(r==null?1:+r));function a(){for(var n,t=o.length,g,i,x,h,p,A,w=0;w<j;++w)for(g=H(o,I,J).visitAfter(B),n=0;n<t;++n)i=o[n],p=s[i.index],A=p*p,x=i.x+i.vx,h=i.y+i.vy,g.visit(C);function C(M,D,E,F,G){var v=M.data,y=M.r,e=p+y;if(v){if(v.index>i.index){var c=x-v.x-v.vx,u=h-v.y-v.vy,f=c*c+u*u;f<e*e&&(c===0&&(c=d(m),f+=c*c),u===0&&(u=d(m),f+=u*u),f=(e-(f=Math.sqrt(f)))/f*l,i.vx+=(c*=f)*(e=(y*=y)/(A+y)),i.vy+=(u*=f)*e,v.vx-=c*(e=1-e),v.vy-=u*e)}return}return D>x+e||F<x-e||E>h+e||G<h-e}}function B(n){if(n.data)return n.r=s[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function z(){if(o){var n,t=o.length,g;for(s=new Array(t),n=0;n<t;++n)g=o[n],s[g.index]=+r(g,n,o)}}return a.initialize=function(n,t){o=n,m=t,z()},a.iterations=function(n){return arguments.length?(j=+n,a):j},a.strength=function(n){return arguments.length?(l=+n,a):l},a.radius=function(n){return arguments.length?(r=typeof n=="function"?n:b(+n),z(),a):r},a}export{L as c};
