import{S as J,r as ut,d as rt,i as et,T as A,a as F}from"./B2nU15ES.js";function R(e){return typeof e=="string"?new J([[document.querySelector(e)]],[document.documentElement]):new J([[e]],ut)}function at(e){let u;for(;u=e.sourceEvent;)e=u;return e}function G(e,u){if(e=at(e),u===void 0&&(u=e.currentTarget),u){var h=u.ownerSVGElement||u;if(h.createSVGPoint){var m=h.createSVGPoint();return m.x=e.clientX,m.y=e.clientY,m=m.matrixTransform(u.getScreenCTM().inverse()),[m.x,m.y]}if(u.getBoundingClientRect){var y=u.getBoundingClientRect();return[e.clientX-y.left-u.clientLeft,e.clientY-y.top-u.clientTop]}}return[e.pageX,e.pageY]}const wt={passive:!1},L={capture:!0,passive:!1};function Mt(e){e.stopImmediatePropagation()}function O(e){e.preventDefault(),e.stopImmediatePropagation()}function st(e){var u=e.document.documentElement,h=R(e).on("dragstart.drag",O,L);"onselectstart"in u?h.on("selectstart.drag",O,L):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none")}function ct(e,u){var h=e.document.documentElement,m=R(e).on("dragstart.drag",null);u&&(m.on("click.drag",O,L),setTimeout(function(){m.on("click.drag",null)},0)),"onselectstart"in h?m.on("selectstart.drag",null):(h.style.MozUserSelect=h.__noselect,delete h.__noselect)}var ht=1e-12;function N(e){return((e=Math.exp(e))+1/e)/2}function lt(e){return((e=Math.exp(e))-1/e)/2}function ft(e){return((e=Math.exp(2*e))-1)/(e+1)}const mt=(function e(u,h,m){function y(p,l){var v=p[0],x=p[1],z=p[2],D=l[0],K=l[1],_=l[2],q=D-v,C=K-x,I=q*q+C*C,P,r;if(I<ht)r=Math.log(_/z)/u,P=function(X){return[v+X*q,x+X*C,z*Math.exp(u*X*r)]};else{var V=Math.sqrt(I),E=(_*_-z*z+m*I)/(2*z*h*V),B=(_*_-z*z-m*I)/(2*_*h*V),Y=Math.log(Math.sqrt(E*E+1)-E),w=Math.log(Math.sqrt(B*B+1)-B);r=(w-Y)/u,P=function(X){var Q=X*r,W=N(Y),Z=z/(h*V)*(W*ft(u*Q+Y)-lt(Y));return[v+Z*q,x+Z*C,z*W/N(u*Q+Y)]}}return P.duration=r*1e3*u/Math.SQRT2,P}return y.rho=function(p){var l=Math.max(.001,+p),v=l*l,x=v*v;return e(l,v,x)},y})(Math.SQRT2,2,4),$=e=>()=>e;function gt(e,{sourceEvent:u,target:h,transform:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:u,enumerable:!0,configurable:!0},target:{value:h,enumerable:!0,configurable:!0},transform:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}function H(e){e.stopImmediatePropagation()}function U(e){e.preventDefault(),e.stopImmediatePropagation()}function pt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function tt(){return this.__zoom||et}function yt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function zt(){return navigator.maxTouchPoints||"ontouchstart"in this}function vt(e,u,h){var m=e.invertX(u[0][0])-h[0][0],y=e.invertX(u[1][0])-h[1][0],p=e.invertY(u[0][1])-h[0][1],l=e.invertY(u[1][1])-h[1][1];return e.translate(y>m?(m+y)/2:Math.min(0,m)||Math.max(0,y),l>p?(p+l)/2:Math.min(0,p)||Math.max(0,l))}function Tt(){var e=pt,u=dt,h=vt,m=yt,y=zt,p=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],v=250,x=mt,z=rt("start","zoom","end"),D,K,_,q=500,C=150,I=0,P=10;function r(t){t.property("__zoom",tt).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",Z).filter(y).on("touchstart.zoom",nt).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",it).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}r.transform=function(t,o,n,i){var a=t.selection?t.selection():t;a.property("__zoom",tt),t!==a?Y(t,o,n,i):a.interrupt().each(function(){w(this,arguments).event(i).start().zoom(null,typeof o=="function"?o.apply(this,arguments):o).end()})},r.scaleBy=function(t,o,n,i){r.scaleTo(t,function(){var a=this.__zoom.k,s=typeof o=="function"?o.apply(this,arguments):o;return a*s},n,i)},r.scaleTo=function(t,o,n,i){r.transform(t,function(){var a=u.apply(this,arguments),s=this.__zoom,c=n==null?B(a):typeof n=="function"?n.apply(this,arguments):n,f=s.invert(c),g=typeof o=="function"?o.apply(this,arguments):o;return h(E(V(s,g),c,f),a,l)},n,i)},r.translateBy=function(t,o,n,i){r.transform(t,function(){return h(this.__zoom.translate(typeof o=="function"?o.apply(this,arguments):o,typeof n=="function"?n.apply(this,arguments):n),u.apply(this,arguments),l)},null,i)},r.translateTo=function(t,o,n,i,a){r.transform(t,function(){var s=u.apply(this,arguments),c=this.__zoom,f=i==null?B(s):typeof i=="function"?i.apply(this,arguments):i;return h(et.translate(f[0],f[1]).scale(c.k).translate(typeof o=="function"?-o.apply(this,arguments):-o,typeof n=="function"?-n.apply(this,arguments):-n),s,l)},i,a)};function V(t,o){return o=Math.max(p[0],Math.min(p[1],o)),o===t.k?t:new A(o,t.x,t.y)}function E(t,o,n){var i=o[0]-n[0]*t.k,a=o[1]-n[1]*t.k;return i===t.x&&a===t.y?t:new A(t.k,i,a)}function B(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function Y(t,o,n,i){t.on("start.zoom",function(){w(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(i).end()}).tween("zoom",function(){var a=this,s=arguments,c=w(a,s).event(i),f=u.apply(a,s),g=n==null?B(f):typeof n=="function"?n.apply(a,s):n,b=Math.max(f[1][0]-f[0][0],f[1][1]-f[0][1]),d=a.__zoom,M=typeof o=="function"?o.apply(a,s):o,S=x(d.invert(g).concat(b/d.k),M.invert(g).concat(b/M.k));return function(T){if(T===1)T=M;else{var k=S(T),j=b/k[2];T=new A(j,g[0]-k[0]*j,g[1]-k[1]*j)}c.zoom(null,T)}})}function w(t,o,n){return!n&&t.__zooming||new X(t,o)}function X(t,o){this.that=t,this.args=o,this.active=0,this.sourceEvent=null,this.extent=u.apply(t,o),this.taps=0}X.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,o){return this.mouse&&t!=="mouse"&&(this.mouse[1]=o.invert(this.mouse[0])),this.touch0&&t!=="touch"&&(this.touch0[1]=o.invert(this.touch0[0])),this.touch1&&t!=="touch"&&(this.touch1[1]=o.invert(this.touch1[0])),this.that.__zoom=o,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var o=R(this.that).datum();z.call(t,this.that,new gt(t,{sourceEvent:this.sourceEvent,target:r,transform:this.that.__zoom,dispatch:z}),o)}};function Q(t,...o){if(!e.apply(this,arguments))return;var n=w(this,o).event(t),i=this.__zoom,a=Math.max(p[0],Math.min(p[1],i.k*Math.pow(2,m.apply(this,arguments)))),s=G(t);if(n.wheel)(n.mouse[0][0]!==s[0]||n.mouse[0][1]!==s[1])&&(n.mouse[1]=i.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[s,i.invert(s)],F(this),n.start()}U(t),n.wheel=setTimeout(c,C),n.zoom("mouse",h(E(V(i,a),n.mouse[0],n.mouse[1]),n.extent,l));function c(){n.wheel=null,n.end()}}function W(t,...o){if(_||!e.apply(this,arguments))return;var n=t.currentTarget,i=w(this,o,!0).event(t),a=R(t.view).on("mousemove.zoom",g,!0).on("mouseup.zoom",b,!0),s=G(t,n),c=t.clientX,f=t.clientY;st(t.view),H(t),i.mouse=[s,this.__zoom.invert(s)],F(this),i.start();function g(d){if(U(d),!i.moved){var M=d.clientX-c,S=d.clientY-f;i.moved=M*M+S*S>I}i.event(d).zoom("mouse",h(E(i.that.__zoom,i.mouse[0]=G(d,n),i.mouse[1]),i.extent,l))}function b(d){a.on("mousemove.zoom mouseup.zoom",null),ct(d.view,i.moved),U(d),i.event(d).end()}}function Z(t,...o){if(e.apply(this,arguments)){var n=this.__zoom,i=G(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(i),s=n.k*(t.shiftKey?.5:2),c=h(E(V(n,s),i,a),u.apply(this,o),l);U(t),v>0?R(this).transition().duration(v).call(Y,c,i,t):R(this).call(r.transform,c,i,t)}}function nt(t,...o){if(e.apply(this,arguments)){var n=t.touches,i=n.length,a=w(this,o,t.changedTouches.length===i).event(t),s,c,f,g;for(H(t),c=0;c<i;++c)f=n[c],g=G(f,this),g=[g,this.__zoom.invert(g),f.identifier],a.touch0?!a.touch1&&a.touch0[2]!==g[2]&&(a.touch1=g,a.taps=0):(a.touch0=g,s=!0,a.taps=1+!!D);D&&(D=clearTimeout(D)),s&&(a.taps<2&&(K=g[0],D=setTimeout(function(){D=null},q)),F(this),a.start())}}function ot(t,...o){if(this.__zooming){var n=w(this,o).event(t),i=t.changedTouches,a=i.length,s,c,f,g;for(U(t),s=0;s<a;++s)c=i[s],f=G(c,this),n.touch0&&n.touch0[2]===c.identifier?n.touch0[0]=f:n.touch1&&n.touch1[2]===c.identifier&&(n.touch1[0]=f);if(c=n.that.__zoom,n.touch1){var b=n.touch0[0],d=n.touch0[1],M=n.touch1[0],S=n.touch1[1],T=(T=M[0]-b[0])*T+(T=M[1]-b[1])*T,k=(k=S[0]-d[0])*k+(k=S[1]-d[1])*k;c=V(c,Math.sqrt(T/k)),f=[(b[0]+M[0])/2,(b[1]+M[1])/2],g=[(d[0]+S[0])/2,(d[1]+S[1])/2]}else if(n.touch0)f=n.touch0[0],g=n.touch0[1];else return;n.zoom("touch",h(E(c,f,g),n.extent,l))}}function it(t,...o){if(this.__zooming){var n=w(this,o).event(t),i=t.changedTouches,a=i.length,s,c;for(H(t),_&&clearTimeout(_),_=setTimeout(function(){_=null},q),s=0;s<a;++s)c=i[s],n.touch0&&n.touch0[2]===c.identifier?delete n.touch0:n.touch1&&n.touch1[2]===c.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(c=G(c,this),Math.hypot(K[0]-c[0],K[1]-c[1])<P)){var f=R(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return r.wheelDelta=function(t){return arguments.length?(m=typeof t=="function"?t:$(+t),r):m},r.filter=function(t){return arguments.length?(e=typeof t=="function"?t:$(!!t),r):e},r.touchable=function(t){return arguments.length?(y=typeof t=="function"?t:$(!!t),r):y},r.extent=function(t){return arguments.length?(u=typeof t=="function"?t:$([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),r):u},r.scaleExtent=function(t){return arguments.length?(p[0]=+t[0],p[1]=+t[1],r):[p[0],p[1]]},r.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],r):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},r.constrain=function(t){return arguments.length?(h=t,r):h},r.duration=function(t){return arguments.length?(v=+t,r):v},r.interpolate=function(t){return arguments.length?(x=t,r):x},r.on=function(){var t=z.on.apply(z,arguments);return t===z?r:t},r.clickDistance=function(t){return arguments.length?(I=(t=+t)*t,r):Math.sqrt(I)},r.tapDistance=function(t){return arguments.length?(P=+t,r):P},r}export{L as a,Mt as b,O as c,st as d,wt as n,G as p,R as s,ct as y,Tt as z};
