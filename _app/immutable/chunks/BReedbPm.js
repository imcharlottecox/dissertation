import{y as Y,x as q}from"./DBryx5vg.js";function et(t,n){var e,o=1;t==null&&(t=0),n==null&&(n=0);function r(){var i,a=e.length,f,c=0,u=0;for(i=0;i<a;++i)f=e[i],c+=f.x,u+=f.y;for(c=(c/a-t)*o,u=(u/a-n)*o,i=0;i<a;++i)f=e[i],f.x-=c,f.y-=u}return r.initialize=function(i){e=i},r.x=function(i){return arguments.length?(t=+i,r):t},r.y=function(i){return arguments.length?(n=+i,r):n},r.strength=function(i){return arguments.length?(o=+i,r):o},r}function C(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return P(this.cover(n,e),n,e,t)}function P(t,n,e,o){if(isNaN(n)||isNaN(e))return t;var r,i=t._root,a={data:o},f=t._x0,c=t._y0,u=t._x1,y=t._y1,w,g,h,v,_,s,x,d;if(!i)return t._root=a,t;for(;i.length;)if((_=n>=(w=(f+u)/2))?f=w:u=w,(s=e>=(g=(c+y)/2))?c=g:y=g,r=i,!(i=i[x=s<<1|_]))return r[x]=a,t;if(h=+t._x.call(null,i.data),v=+t._y.call(null,i.data),n===h&&e===v)return a.next=i,r?r[x]=a:t._root=a,t;do r=r?r[x]=new Array(4):t._root=new Array(4),(_=n>=(w=(f+u)/2))?f=w:u=w,(s=e>=(g=(c+y)/2))?c=g:y=g;while((x=s<<1|_)===(d=(v>=g)<<1|h>=w));return r[d]=i,r[x]=a,t}function F(t){var n,e,o=t.length,r,i,a=new Array(o),f=new Array(o),c=1/0,u=1/0,y=-1/0,w=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,f[e]=i,r<c&&(c=r),r>y&&(y=r),i<u&&(u=i),i>w&&(w=i));if(c>y||u>w)return this;for(this.cover(c,u).cover(y,w),e=0;e<o;++e)P(this,a[e],f[e],t[e]);return this}function G(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,o=this._y0,r=this._x1,i=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,i=(o=Math.floor(n))+1;else{for(var a=r-e||1,f=this._root,c,u;e>t||t>=r||o>n||n>=i;)switch(u=(n<o)<<1|t<e,c=new Array(4),c[u]=f,f=c,a*=2,u){case 0:r=e+a,i=o+a;break;case 1:e=r-a,i=o+a;break;case 2:r=e+a,o=i-a;break;case 3:e=r-a,o=i-a;break}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=o,this._x1=r,this._y1=i,this}function H(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function J(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function A(t,n,e,o,r){this.node=t,this.x0=n,this.y0=e,this.x1=o,this.y1=r}function K(t,n,e){var o,r=this._x0,i=this._y0,a,f,c,u,y=this._x1,w=this._y1,g=[],h=this._root,v,_;for(h&&g.push(new A(h,r,i,y,w)),e==null?e=1/0:(r=t-e,i=n-e,y=t+e,w=n+e,e*=e);v=g.pop();)if(!(!(h=v.node)||(a=v.x0)>y||(f=v.y0)>w||(c=v.x1)<r||(u=v.y1)<i))if(h.length){var s=(a+c)/2,x=(f+u)/2;g.push(new A(h[3],s,x,c,u),new A(h[2],a,x,s,u),new A(h[1],s,f,c,x),new A(h[0],a,f,s,x)),(_=(n>=x)<<1|t>=s)&&(v=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=v)}else{var d=t-+this._x.call(null,h.data),p=n-+this._y.call(null,h.data),l=d*d+p*p;if(l<e){var N=Math.sqrt(e=l);r=t-N,i=n-N,y=t+N,w=n+N,o=h.data}}return o}function L(t){if(isNaN(y=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,o,r,i,a=this._x0,f=this._y0,c=this._x1,u=this._y1,y,w,g,h,v,_,s,x;if(!e)return this;if(e.length)for(;;){if((v=y>=(g=(a+c)/2))?a=g:c=g,(_=w>=(h=(f+u)/2))?f=h:u=h,n=e,!(e=e[s=_<<1|v]))return this;if(!e.length)break;(n[s+1&3]||n[s+2&3]||n[s+3&3])&&(o=n,x=s)}for(;e.data!==t;)if(r=e,!(e=e.next))return this;return(i=e.next)&&delete e.next,r?(i?r.next=i:delete r.next,this):n?(i?n[s]=i:delete n[s],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(o?o[x]=e:this._root=e),this):(this._root=i,this)}function O(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function R(){return this._root}function T(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function U(t){var n=[],e,o=this._root,r,i,a,f,c;for(o&&n.push(new A(o,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(o=e.node,i=e.x0,a=e.y0,f=e.x1,c=e.y1)&&o.length){var u=(i+f)/2,y=(a+c)/2;(r=o[3])&&n.push(new A(r,u,y,f,c)),(r=o[2])&&n.push(new A(r,i,y,u,c)),(r=o[1])&&n.push(new A(r,u,a,f,y)),(r=o[0])&&n.push(new A(r,i,a,u,y))}return this}function V(t){var n=[],e=[],o;for(this._root&&n.push(new A(this._root,this._x0,this._y0,this._x1,this._y1));o=n.pop();){var r=o.node;if(r.length){var i,a=o.x0,f=o.y0,c=o.x1,u=o.y1,y=(a+c)/2,w=(f+u)/2;(i=r[0])&&n.push(new A(i,a,f,y,w)),(i=r[1])&&n.push(new A(i,y,f,c,w)),(i=r[2])&&n.push(new A(i,a,w,y,u)),(i=r[3])&&n.push(new A(i,y,w,c,u))}e.push(o)}for(;o=e.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}function W(t){return t[0]}function Z(t){return arguments.length?(this._x=t,this):this._x}function $(t){return t[1]}function k(t){return arguments.length?(this._y=t,this):this._y}function X(t,n,e){var o=new S(n??W,e??$,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function S(t,n,e,o,r,i){this._x=t,this._y=n,this._x0=e,this._y0=o,this._x1=r,this._y1=i,this._root=void 0}function D(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var m=X.prototype=S.prototype;m.copy=function(){var t=new S(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,o;if(!n)return t;if(!n.length)return t._root=D(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var r=0;r<4;++r)(o=n.source[r])&&(o.length?e.push({source:o,target:n.target[r]=new Array(4)}):n.target[r]=D(o));return t};m.add=C;m.addAll=F;m.cover=G;m.data=H;m.extent=J;m.find=K;m.remove=L;m.removeAll=O;m.root=R;m.size=T;m.visit=U;m.visitAfter=V;m.x=Z;m.y=k;function Q(t){return function(){return t}}function z(t){return(t()-.5)*1e-6}function tt(t){return t.index}function E(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function it(t){var n=tt,e=w,o,r=Q(30),i,a,f,c,u,y=1;t==null&&(t=[]);function w(s){return 1/Math.min(f[s.source.index],f[s.target.index])}function g(s){for(var x=0,d=t.length;x<y;++x)for(var p=0,l,N,M,b,j,I,B;p<d;++p)l=t[p],N=l.source,M=l.target,b=M.x+M.vx-N.x-N.vx||z(u),j=M.y+M.vy-N.y-N.vy||z(u),I=Math.sqrt(b*b+j*j),I=(I-i[p])/I*s*o[p],b*=I,j*=I,M.vx-=b*(B=c[p]),M.vy-=j*B,N.vx+=b*(B=1-B),N.vy+=j*B}function h(){if(a){var s,x=a.length,d=t.length,p=new Map(a.map((N,M)=>[n(N,M,a),N])),l;for(s=0,f=new Array(x);s<d;++s)l=t[s],l.index=s,typeof l.source!="object"&&(l.source=E(p,l.source)),typeof l.target!="object"&&(l.target=E(p,l.target)),f[l.source.index]=(f[l.source.index]||0)+1,f[l.target.index]=(f[l.target.index]||0)+1;for(s=0,c=new Array(d);s<d;++s)l=t[s],c[s]=f[l.source.index]/(f[l.source.index]+f[l.target.index]);o=new Array(d),v(),i=new Array(d),_()}}function v(){if(a)for(var s=0,x=t.length;s<x;++s)o[s]=+e(t[s],s,t)}function _(){if(a)for(var s=0,x=t.length;s<x;++s)i[s]=+r(t[s],s,t)}return g.initialize=function(s,x){a=s,u=x,h()},g.links=function(s){return arguments.length?(t=s,h(),g):t},g.id=function(s){return arguments.length?(n=s,g):n},g.iterations=function(s){return arguments.length?(y=+s,g):y},g.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Q(+s),v(),g):e},g.distance=function(s){return arguments.length?(r=typeof s=="function"?s:Q(+s),_(),g):r},g}function rt(){var t,n,e,o,r=Q(-30),i,a=1,f=1/0,c=.81;function u(h){var v,_=t.length,s=X(t,q,Y).visitAfter(w);for(o=h,v=0;v<_;++v)n=t[v],s.visit(g)}function y(){if(t){var h,v=t.length,_;for(i=new Array(v),h=0;h<v;++h)_=t[h],i[_.index]=+r(_,h,t)}}function w(h){var v=0,_,s,x=0,d,p,l;if(h.length){for(d=p=l=0;l<4;++l)(_=h[l])&&(s=Math.abs(_.value))&&(v+=_.value,x+=s,d+=s*_.x,p+=s*_.y);h.x=d/x,h.y=p/x}else{_=h,_.x=_.data.x,_.y=_.data.y;do v+=i[_.data.index];while(_=_.next)}h.value=v}function g(h,v,_,s){if(!h.value)return!0;var x=h.x-n.x,d=h.y-n.y,p=s-v,l=x*x+d*d;if(p*p/c<l)return l<f&&(x===0&&(x=z(e),l+=x*x),d===0&&(d=z(e),l+=d*d),l<a&&(l=Math.sqrt(a*l)),n.vx+=x*h.value*o/l,n.vy+=d*h.value*o/l),!0;if(h.length||l>=f)return;(h.data!==n||h.next)&&(x===0&&(x=z(e),l+=x*x),d===0&&(d=z(e),l+=d*d),l<a&&(l=Math.sqrt(a*l)));do h.data!==n&&(p=i[h.data.index]*o/l,n.vx+=x*p,n.vy+=d*p);while(h=h.next)}return u.initialize=function(h,v){t=h,e=v,y()},u.strength=function(h){return arguments.length?(r=typeof h=="function"?h:Q(+h),y(),u):r},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(f=h*h,u):Math.sqrt(f)},u.theta=function(h){return arguments.length?(c=h*h,u):Math.sqrt(c)},u}export{et as a,Q as c,z as j,it as l,rt as m,X as q};
